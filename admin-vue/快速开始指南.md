# MediaCMS 管理后台 - 快速开始指南

## 📦 第一步：安装依赖

```bash
cd admin-vue
npm install
```

**预计时间**: 3-5 分钟

安装的主要依赖包括：
- `vue`: Vue 3 核心
- `vue-router`: 路由管理
- `pinia`: 状态管理
- `element-plus`: UI 组件库
- `axios`: HTTP 客户端
- `echarts`: 图表库
- `dayjs`: 日期处理
- `lodash-es`: 工具库

---

## 🚀 第二步：启动开发服务器

```bash
npm run dev
```

**访问地址**: `http://localhost:5174/admin/`

**默认端口**: 5174 (与主站 5173 不冲突)

---

## 🔑 第三步：登录管理后台

### 测试账号

使用 Django 的超级用户账号登录：

```bash
# 如果还没有超级用户，在 Django 项目目录执行：
python manage.py createsuperuser
```

### 登录步骤

1. 打开 `http://localhost:5174/admin/`
2. 输入超级用户的用户名和密码
3. 点击"登录"按钮

**权限要求**:
- ✅ 用户必须是 `is_staff=True` (工作人员)
- ✅ 或者 `is_superuser=True` (超级用户)

---

## 📊 第四步：探索功能

### 仪表板 (Dashboard)

登录后默认进入仪表板，显示：

- **统计卡片**: 媒体数、用户数、观看量、待审核数
- **系统状态**: CPU、内存、磁盘使用率
- **快捷操作**: 一键跳转到常用功能

### 媒体管理

路径: `/admin/media/list`

功能：
- ✅ 查看所有媒体列表
- ✅ 搜索媒体标题
- ✅ 筛选状态（公开/私密/仅限链接）
- ✅ 筛选精选媒体
- ✅ 查看媒体详情
- ✅ 跳转到主站查看

### 侧边栏菜单

- 🏠 **仪表板**: 数据概览
- 🎬 **媒体管理**: 媒体列表、数据分析
- 👥 **用户管理**: 用户列表、权限管理
- 💬 **内容管理**: 评论、举报
- ⚙️ **系统管理**: 设置、监控

---

## 🎨 第五步：自定义配置

### 修改端口

编辑 `vite.config.ts`:

```typescript
export default defineConfig({
  server: {
    port: 5174,  // 改成你想要的端口
  },
})
```

### 修改主题色

编辑 `src/styles/variables.scss`:

```scss
$primary-color: #409eff;  // 改成你喜欢的颜色
```

### 切换暗色主题

点击顶栏的 ☀️/🌙 图标即可切换主题

---

## 🏗️ 第六步：构建生产版本

```bash
npm run build
```

构建产物会输出到 `../static/admin/` 目录

**构建文件包括**:
- `index.html` - 入口 HTML
- `assets/*.js` - JavaScript 文件
- `assets/*.css` - CSS 文件

---

## 🔌 第七步：集成到 Django

### 1. 配置 Django URL

编辑 `cms/urls.py`:

```python
from django.views.generic import TemplateView

urlpatterns = [
    # ... 其他路由
    
    # 🆕 管理后台 SPA
    re_path(r'^admin/.*', TemplateView.as_view(
        template_name='admin/index.html'
    ), name='admin_spa'),
    
    # Django Admin (改个路径避免冲突)
    path('django-admin/', admin.site.urls),
]
```

### 2. 收集静态文件

```bash
python manage.py collectstatic
```

### 3. 访问管理后台

开发环境: `http://localhost:8000/admin/`

生产环境: `https://yourdomain.com/admin/`

---

## 🔧 开发工具推荐

### VS Code 扩展

- **Volar** - Vue 3 语言支持
- **TypeScript Vue Plugin (Volar)** - TS 支持
- **ESLint** - 代码检查
- **Prettier** - 代码格式化

### 浏览器插件

- **Vue.js devtools** - Vue 调试工具
- **React Developer Tools** - (可选)

---

## 📝 开发流程

### 1. 创建新页面

```bash
# 在 src/views/ 下创建新组件
src/views/NewModule/List.vue
```

### 2. 添加路由

编辑 `src/router/index.ts`:

```typescript
{
  path: 'new-module',
  name: 'NewModule',
  component: () => import('@/views/NewModule/List.vue'),
  meta: { title: '新模块', icon: 'Document' }
}
```

### 3. 添加菜单

菜单会自动根据路由生成，只需确保路由配置正确

### 4. 调用 API

```typescript
import http from '@/api/http'

// GET 请求
const data = await http.get('/v1/your-endpoint')

// POST 请求
const result = await http.post('/v1/your-endpoint', { key: 'value' })
```

---

## 🐛 调试技巧

### 1. 查看 API 请求

打开浏览器开发者工具 → Network 标签页

### 2. 查看 Vue 组件状态

安装 Vue.js devtools 插件，在开发者工具中查看

### 3. 查看 Pinia 状态

```typescript
import { useAuthStore } from '@/stores/auth'

const authStore = useAuthStore()
console.log(authStore.$state)
```

### 4. 查看路由信息

```typescript
import { useRouter, useRoute } from 'vue-router'

const router = useRouter()
const route = useRoute()

console.log('当前路由:', route.path)
console.log('所有路由:', router.getRoutes())
```

---

## ⚡ 性能优化

### 1. 路由懒加载

已配置，路由组件会按需加载：

```typescript
component: () => import('@/views/Dashboard/index.vue')
```

### 2. Element Plus 按需导入

已配置 `unplugin-vue-components`，自动按需导入组件

### 3. 代码分割

构建时会自动分割成多个 chunk:
- `element-plus.js` - Element Plus 库
- `vue-vendor.js` - Vue 相关库
- `echarts.js` - 图表库

---

## 📱 移动端适配

管理后台已做响应式适配：

- **桌面端** (≥1200px): 完整布局
- **平板端** (768px-1200px): 紧凑布局
- **移动端** (<768px): 移动优化

侧边栏在移动端会自动收起

---

## 🔐 安全建议

### 1. 生产环境配置

- ✅ 启用 HTTPS
- ✅ 配置 CORS 白名单
- ✅ 启用 CSRF 保护
- ✅ 限制 API 访问频率

### 2. 敏感信息处理

- ❌ 不要在前端代码中硬编码密钥
- ✅ 使用环境变量
- ✅ Token 存储在 localStorage (已实现)
- ✅ API 请求自动添加 Token (已实现)

---

## 🎯 下一步

### 功能开发优先级

1. ⏳ **批量操作** - 批量删除、审核、推荐
2. ⏳ **数据图表** - 添加 ECharts 可视化
3. ⏳ **用户管理** - 完善用户列表和权限管理
4. ⏳ **内容审核** - 评论、举报处理流程
5. ⏳ **系统监控** - 实时监控系统状态

### 学习资源

- 📖 [Vue 3 官方教程](https://cn.vuejs.org/guide/introduction.html)
- 📖 [Element Plus 组件文档](https://element-plus.org/zh-CN/component/overview.html)
- 📖 [TypeScript 入门教程](https://ts.xcatliu.com/)
- 📖 [Vite 构建优化](https://cn.vitejs.dev/guide/build.html)

---

## 📞 获取帮助

### 常见问题

查看 `README.md` 中的常见问题部分

### 报告 Bug

在项目 Issues 中提交问题

### 功能建议

欢迎在 Issues 中提出功能建议

---

## ✅ 检查清单

启动前检查：

- [ ] Node.js 版本 >= 16
- [ ] 已安装依赖 (`npm install`)
- [ ] Django 后端正在运行
- [ ] 有可用的管理员账号

开发中检查：

- [ ] 代码遵循 TypeScript 规范
- [ ] 组件使用 Composition API
- [ ] API 调用有错误处理
- [ ] 添加了适当的 Loading 状态

部署前检查：

- [ ] 执行了 `npm run build`
- [ ] 测试了生产构建版本
- [ ] 配置了 Django 路由
- [ ] 收集了静态文件

---

**🎉 恭喜！你已经掌握了 MediaCMS 管理后台的基本使用！**

开始你的管理后台之旅吧！ 🚀

