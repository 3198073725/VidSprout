# MediaCMS ä¸‹ä¸€æ­¥æ“ä½œæŒ‡å—

## âœ… å½“å‰å®Œæˆ
- [x] Python ä¾èµ–å®‰è£…å®Œæˆ
- [x] local_settings.py é…ç½®æ–‡ä»¶å·²åˆ›å»º
- [x] æ•°æ®åº“è¿ç§»å·²å®Œæˆ
- [x] åˆå§‹æ•°æ®å·²åŠ è½½ï¼ˆencoding_profiles.json, categories.jsonï¼‰
- [x] è¶…çº§ç”¨æˆ·å·²åˆ›å»ºï¼ˆç”¨æˆ·å: rootï¼‰
- [x] é™æ€æ–‡ä»¶å·²æ”¶é›†
- [x] é…ç½®æ£€æŸ¥é€šè¿‡ï¼ˆæ— é”™è¯¯ï¼‰
- [x] å‰ç«¯ç¯å¢ƒå˜é‡æ–‡ä»¶å·²åˆ›å»º
- [x] å‰ç«¯ä¾èµ–å·²å®‰è£…

## ğŸ“ ä¸‹ä¸€æ­¥æ“ä½œï¼ˆæŒ‰é¡ºåºæ‰§è¡Œï¼‰

### æ­¥éª¤ 1ï¼šç¡®ä¿æ•°æ®åº“å·²é…ç½®

```powershell
# å¦‚æœè¿˜æ²¡æœ‰é…ç½®æ•°æ®åº“ï¼Œè¿è¡Œï¼š
.\fix-postgres-password.bat

# æˆ–ä½¿ç”¨ pgAdmin å›¾å½¢ç•Œé¢åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·
```

### æ­¥éª¤ 2ï¼šè¿è¡Œæ•°æ®åº“è¿ç§»

```powershell
# ç¡®ä¿è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»ï¼ˆçœ‹åˆ° (venv) å‰ç¼€ï¼‰
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼šE:\Graduation Project\cs001\mediacms

python manage.py migrate

# å¦‚æœæˆåŠŸï¼Œä¼šçœ‹åˆ°å¾ˆå¤šè¡¨åˆ›å»ºçš„è¾“å‡º
# å¦‚æœå¤±è´¥ï¼Œæ£€æŸ¥ï¼š
# 1. PostgreSQL æœåŠ¡æ˜¯å¦è¿è¡Œ
# 2. æ•°æ®åº“ mediacms æ˜¯å¦å­˜åœ¨
# 3. ç”¨æˆ· mediacms å¯†ç æ˜¯å¦æ­£ç¡®
```

### æ­¥éª¤ 3ï¼šåŠ è½½åˆå§‹æ•°æ®

```powershell
# åŠ è½½ç¼–ç é…ç½®æ–‡ä»¶ï¼ˆè½¬ç é…ç½®ï¼‰
python manage.py loaddata fixtures/encoding_profiles.json

# åŠ è½½åˆ†ç±»æ•°æ®
python manage.py loaddata fixtures/categories.json
```

### æ­¥éª¤ 4ï¼šåˆ›å»ºè¶…çº§ç”¨æˆ·ï¼ˆç®¡ç†å‘˜è´¦å·ï¼‰

```powershell
# åˆ›å»ºç®¡ç†å‘˜è´¦å·
python manage.py createsuperuser

# æŒ‰æç¤ºè¾“å…¥ï¼š
# - Username: adminï¼ˆæˆ–ä½ å–œæ¬¢çš„ç”¨æˆ·åï¼‰
# - Email: admin@example.comï¼ˆå¯é€‰ï¼‰
# - Password: è®¾ç½®ä¸€ä¸ªå¼ºå¯†ç ï¼ˆè‡³å°‘7ä¸ªå­—ç¬¦ï¼‰
# - Password (again): å†æ¬¡è¾“å…¥ç¡®è®¤
```

### æ­¥éª¤ 5ï¼šæ”¶é›†é™æ€æ–‡ä»¶

```powershell
# æ”¶é›† Django é™æ€æ–‡ä»¶ï¼ˆCSSã€JSç­‰ï¼‰
python manage.py collectstatic --noinput
```

### æ­¥éª¤ 6ï¼šéªŒè¯é…ç½®

```powershell
# æ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®
python manage.py check

# åº”è¯¥çœ‹åˆ°ï¼šSystem check identified no issues (0 silenced).
```

### æ­¥éª¤ 7ï¼šæµ‹è¯•åç«¯ï¼ˆå¯é€‰ï¼‰

```powershell
# å¯åŠ¨ Django å¼€å‘æœåŠ¡å™¨ï¼ˆæµ‹è¯•ç”¨ï¼‰
python manage.py runserver 0.0.0.0:8000

# åº”è¯¥çœ‹åˆ°ï¼š
# Starting development server at http://0.0.0.0:8000/
# Quit the server with CTRL-BREAK.

# åœ¨æµè§ˆå™¨è®¿é—®ï¼š
# - http://localhost:8000/adminï¼ˆç®¡ç†åå°ï¼‰
# - http://localhost:8000/api/v1/ï¼ˆAPI æ–‡æ¡£ï¼‰

# æµ‹è¯•åæŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨
```

---

## ğŸ¨ å‰ç«¯é…ç½®

### æ­¥éª¤ 1ï¼šåˆ›å»ºå‰ç«¯ç¯å¢ƒå˜é‡æ–‡ä»¶ âš ï¸ **é‡è¦ï¼šå¿…é¡»åˆ›å»º**

**æ£€æŸ¥ï¼š** ç¡®è®¤ `frontend-vue/.env.development` æ–‡ä»¶æ˜¯å¦å­˜åœ¨

å¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–‡ä»¶ `frontend-vue/.env.development`ï¼š

```bash
# API åŸºç¡€åœ°å€
VITE_API_BASE=http://localhost:8000/api

# æ˜¯å¦ä½¿ç”¨ CSRF
VITE_USE_CSRF=false

# Token ç›¸å…³é…ç½®
VITE_ACCESS_HEADER=Authorization
VITE_ACCESS_PREFIX=Bearer

# Token åˆ·æ–°ç«¯ç‚¹
VITE_REFRESH_ENDPOINT=http://localhost:8000/api/v1/auth/refresh

# å‰ç«¯åœ°å€
VITE_FRONTEND_URL=http://localhost:8080

# åç«¯åœ°å€
VITE_BACKEND_URL=http://localhost:8000
```

**æ³¨æ„ï¼š** æ­¤æ–‡ä»¶å·²è¢«è‡ªåŠ¨åˆ›å»ºï¼Œå¦‚æœä¸å­˜åœ¨è¯·æ‰‹åŠ¨åˆ›å»ºã€‚

### æ­¥éª¤ 2ï¼šå®‰è£…å‰ç«¯ä¾èµ–

```powershell
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend-vue

# å®‰è£…ä¾èµ–
npm install

# å¦‚æœé€Ÿåº¦æ…¢ï¼Œä½¿ç”¨å›½å†…é•œåƒï¼š
npm install --registry=https://registry.npmmirror.com
```

---

## ğŸš€ å¯åŠ¨æ‰€æœ‰æœåŠ¡

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ä¸€é”®å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```powershell
# å›åˆ°é¡¹ç›®æ ¹ç›®å½•
cd ..

# è¿è¡Œå¯åŠ¨è„šæœ¬ï¼ˆä¼šè‡ªåŠ¨æ‰“å¼€å¤šä¸ªçª—å£ï¼‰
.\start-dev.bat
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨ï¼ˆéœ€è¦å¤šä¸ªç»ˆç«¯ï¼‰

**ç»ˆç«¯ 1ï¼šå¯åŠ¨ Redisï¼ˆå¦‚æœä½¿ç”¨ WSLï¼‰**
```bash
wsl
sudo service redis-server start
exit
```

**ç»ˆç«¯ 2ï¼šCelery Worker (çŸ­ä»»åŠ¡)**
```powershell
cd "E:\Graduation Project\cs001\mediacms"
.\venv\Scripts\Activate.ps1
celery -A cms worker --loglevel=info -Q short_tasks -n short@%h
```

**ç»ˆç«¯ 3ï¼šCelery Worker (é•¿ä»»åŠ¡)**
```powershell
cd "E:\Graduation Project\cs001\mediacms"
.\venv\Scripts\Activate.ps1
celery -A cms worker --loglevel=info -Q long_tasks -n long@%h
```

**ç»ˆç«¯ 4ï¼šCelery Beat**
```powershell
cd "E:\Graduation Project\cs001\mediacms"
.\venv\Scripts\Activate.ps1
celery -A cms beat --loglevel=info
```

**ç»ˆç«¯ 5ï¼šDjango åç«¯**
```powershell
cd "E:\Graduation Project\cs001\mediacms"
.\venv\Scripts\Activate.ps1
python manage.py runserver 0.0.0.0:8000
```

**ç»ˆç«¯ 6ï¼šVue å‰ç«¯**
```powershell
cd "E:\Graduation Project\cs001\mediacms\frontend-vue"
npm run dev
```

---

## âœ… éªŒè¯æ¸…å•

å¯åŠ¨åéªŒè¯ï¼š

- [ ] Django åç«¯ï¼šhttp://localhost:8000/adminï¼ˆå¯ä»¥ç™»å½•ï¼‰
- [ ] API æ–‡æ¡£ï¼šhttp://localhost:8000/api/v1/
- [ ] Vue å‰ç«¯ï¼šhttp://localhost:8080ï¼ˆå¯ä»¥è®¿é—®ï¼‰
- [ ] å¯ä»¥æ³¨å†Œæ–°ç”¨æˆ·
- [ ] å¯ä»¥ç™»å½•ç³»ç»Ÿ
- [ ] å¯ä»¥ä¸Šä¼ åª’ä½“æ–‡ä»¶

---

## âš ï¸ å¸¸è§é—®é¢˜

### Redis è¿æ¥å¤±è´¥
- æ£€æŸ¥ Redis æ˜¯å¦è¿è¡Œï¼š`redis-cli ping`
- å¦‚æœä½¿ç”¨ WSLï¼Œç¡®ä¿ WSL å·²å¯åŠ¨

### æ•°æ®åº“è¿æ¥å¤±è´¥
- æ£€æŸ¥ PostgreSQL æœåŠ¡æ˜¯å¦è¿è¡Œ
- è¿è¡Œ `.\fix-postgres-password.bat` ä¿®å¤

### ç«¯å£è¢«å ç”¨
- Django åç«¯é»˜è®¤ç«¯å£ï¼š8000
- Vue å‰ç«¯é»˜è®¤ç«¯å£ï¼š8080
- æ£€æŸ¥ç«¯å£å ç”¨ï¼š`netstat -ano | findstr :8000`

---

## ğŸ¯ å¿«é€Ÿå‘½ä»¤ï¼ˆå¤åˆ¶ç²˜è´´ï¼‰

```powershell
# 1. é…ç½®æ•°æ®åº“ï¼ˆå¦‚æœè¿˜æ²¡åšï¼‰
.\fix-postgres-password.bat

# 2. æ•°æ®åº“è¿ç§»
python manage.py migrate

# 3. åŠ è½½åˆå§‹æ•°æ®
python manage.py loaddata fixtures/encoding_profiles.json
python manage.py loaddata fixtures/categories.json

# 4. åˆ›å»ºè¶…çº§ç”¨æˆ·
python manage.py createsuperuser

# 5. æ”¶é›†é™æ€æ–‡ä»¶
python manage.py collectstatic --noinput

# 6. éªŒè¯é…ç½®
python manage.py check

# 7. å‰ç«¯é…ç½®ï¼ˆåˆ›å»º .env.developmentï¼‰
# 8. å®‰è£…å‰ç«¯ä¾èµ–
cd frontend-vue
npm install

# 9. å¯åŠ¨æ‰€æœ‰æœåŠ¡
cd ..
.\start-dev.bat
```

