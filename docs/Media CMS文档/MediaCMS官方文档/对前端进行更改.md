### 对前端进行更改

React 的集成方式比通常的 SPA 项目更为复杂，这是因为 React 是作为由 Django 模板加载的库来使用的，因此它不是一个独立的项目，也不处理路由等。

需要考虑的两个目录是：

- `frontend/src`，用于存放 React 文件
- `templates/`，用于存放 Django 模板。

Django 使用了一个高度直观的分层模板系统（https://docs.djangoproject.com/en/4.2/ref/templates/），其中基础模板是 `templates/root.html`，所有其他模板都继承它。

React 是通过 Django 模板调用的，例如，`templates/cms/media.html`会加载 `js/media.js`。

为了修改 React 代码，请编辑 `frontend/src`下的代码，并在 http://localhost:8088/上检查其效果。准备就绪后，构建并将其复制到 Django 的静态文件夹中，以便由 Django 提供服务。

### 前端开发工作流程

1. 编辑 `frontend/src/`下的文件
2. 在 http://localhost:8088/上检查更改
3. 使用 `docker compose -f docker-compose-dev.yaml exec frontend npm run dist`构建前端
4. 使用 `cp -r frontend/dist/static/* static/`将静态文件复制到 Django 的静态文件夹
5. 重启 Django - `docker compose -f docker-compose-dev.yaml restart web`，以便其使用新的静态文件
6. 提交更改

### 辅助命令

正在努力提供辅助命令，请查看 Makefile 了解其支持的功能。例如：

进入 web 容器的 Bash：

```
user@user:~/mediacms$ make admin-shell
root@ca8c1096726b:/home/mediacms.io/mediacms# ./manage.py shell
```

构建前端：

```
user@user:~/mediacms$ make build-frontend
docker compose -f docker-compose-dev.yaml exec frontend npm run dist

> mediacms-frontend@0.9.1 dist /home/mediacms.io/mediacms/frontend
> mediacms-scripts rimraf ./dist && mediacms-scripts build --config=./config/mediacms.config.js --env=dist
...
```